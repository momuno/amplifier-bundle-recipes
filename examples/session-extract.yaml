name: "session-extract"
description: "Quick extraction of session provider/model to help decide verification strategy"
version: "2.0.0"
author: "Amplifier Recipes Collection"
tags: ["verification", "session-analysis", "extraction"]

# Session Extraction: Quick Provider/Model Check
#
# This is a LIGHTWEIGHT recipe that answers:
# - What provider/model was used in this session?
# - What was the session about (brief summary)?
#
# Use this when you don't remember what provider a session used
# and want to decide what verifier to use.
#
# If you already know the provider, skip this and go straight to:
#   session-verify with session_id=X verifier_provider=Y
#
# Usage:
#   session-extract with session_id=abc12345

context:
  session_id: ""  # Required: session ID to check (full or partial)

steps:
  - id: "quick-extract"
    agent: "foundation:session-analyst"
    prompt: |
      I need a QUICK metadata check on session {{session_id}}.

      Extract ONLY these items (be brief):

      ## Session Metadata
      ```
      ORIGINAL_PROVIDER: [anthropic | openai | azure | google | other]
      ORIGINAL_MODEL: [exact model id, e.g. claude-opus-4-5-20251101, gpt-4o]
      ```

      ## One-Line Summary
      What was this session about? One sentence max.

      ## Turn Count
      How many turns/exchanges in the session?

      ---

      That's it. Don't extract intent, claims, reality, or gaps - that's for the verification step.

      End with this guidance:

      ```
      ═══════════════════════════════════════════════════════════════════
      NEXT STEP: Cross-Provider Verification
      ═══════════════════════════════════════════════════════════════════

      To verify this session with a different provider, run:
        session-verify with session_id={{session_id}} verifier_provider=<provider>

      Default models per provider:
        openai    → gpt-5.2
        google    → gemini-3-pro-preview
        anthropic → claude-opus-4-5-20251101

      Suggested (use a DIFFERENT provider than original):
        session-verify with session_id={{session_id}} verifier_provider=openai
      ═══════════════════════════════════════════════════════════════════
      ```
    output: "session_metadata"
    timeout: 120  # Should be fast

# Output: session_metadata
# Contains provider, model, brief summary, and guidance for next step
